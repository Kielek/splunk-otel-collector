receivers:
  otlp:
    protocols:
      grpc:
      http:
  signalfx:
    endpoint: 0.0.0.0:23081
    access_token_passthrough: true
processors:
  batch:
  memory_limiter:
    # 75% of maximum memory up to 4G
    limit_mib: 1536
    # 25% of limit up to 2G
    spike_limit_mib: 512
    check_interval: 5s
#processors:
#  nop:
#
#receivers:
#  nop:

exporters:
  pulsar:
    topic: otlp_metrics
    broker: pulsar+ssl://10.176.5.10:6651
    auth:
      tls:
        ca_file: ""
        cert_file: ""
        key_file: ""
        insecure_skip_verify: true
    producer:
      producer_name: otel-pulsar
      send_timeout: 0
      disable_block_if_queue_full: false
      max_pending_messages: 100
      hashing_scheme: java_string_hash
      compression_type: zstd
      compression_level: default
      batch_builder_type: 1
      disable_batching: false
      batching_max_publish_delay: 10
      batching_max_messages: 1000
      batching_max_size: 128000
      partitions_auto_discovery_interval: 1

service:
  pipelines:
    metrics:
      receivers: [signalfx]
      processors: [batch, memory_limiter]
      exporters: [pulsar]